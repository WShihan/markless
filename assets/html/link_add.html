{{ define "style"}}
<link rel="stylesheet" href="{{$.Env.BaseURL}}/static/css/link_add.css" />
<link rel="stylesheet" href="{{$.Env.BaseURL}}/static/css/link_edit.css" />

{{ end }} 

{{ define "content"}}
<form action="{{$.Env.BaseURL}}/link/add" method="post">
  <ul>
    <li>
      <label for="title">{{ i18n "page.link-find.form.url.label" $.Page.Lang }} *</label>
      <input type="text" name="url" value="" placeholder="{{ i18n "page.link-find.form.url.placeholder" $.Page.Lang }}" />
    </li>
  </ul>
  <ul>
    <details>
      <summary>{{ i18n "page.link-find.details.info.summary" $.Page.Lang }}</summary>
      <li>
        <label for="title">{{ i18n "page.link-find.form.desc.label" $.Page.Lang }}</label>
        <input type="text" name="desc" value="" placeholder="{{ i18n "page.link-find.form.desc.placeholder" $.Page.Lang }}"/>
      </li>
      <li>
        <label for="tags">{{ i18n "page.link-find.form.tags.label" $.Page.Lang }}</label>
        <textarea  id="tags" type="text" name="tags" value="" placeholder="{{ i18n "page.link-find.form.tags.placeholder" $.Page.Lang }}"></textarea>
      </li>
      <li>
        <details>
          <summary>{{ i18n "page.link-find.details.tags.summary" $.Page.Lang }}</summary>
          <div class="tag-update">
            <div class="tag-box">
              <label >{{ i18n "page.link-find.tags.handle-tip" $.Page.Lang }}</label>
              <select id="all-tag"  multiple="multiple" size="10">
                {{ range .Data }}
                <option value="{{.Name }}">{{.Name}}</option>
                {{ end }}
                </select>
            </div>
          </div>
        </details>
      </li>
    </details>
  </ul>


  <button class="submit" type="submit" onclick="return confirm('{{ i18n "confirm.add" $.Page.Lang }}')">{{ i18n "button.add" $.Page.Lang }}</button>
</form>
<script defer>
  let allTagEle = document.getElementById('all-tag')
  let tagsEle = document.getElementById('tags')
  function changeTageItems(name, flag){
    if (tagsEle.value == ''){
       tagsEle.value = name
       return
    }
    let names = tagsEle.value.split('&')
    names.push(name)
    tagsEle.value = names.join('&')
  }
  allTagEle.addEventListener('dblclick', function(e) {
    changeTageItems(e.target.value)
  })
</script>
{{ end }}
